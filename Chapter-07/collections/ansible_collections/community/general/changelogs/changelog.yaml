ancestor: 3.0.0
releases:
  4.0.0:
    changes:
      breaking_changes:
      - archive - adding idempotency checks for changes to file names and content
        within the ``destination`` file (https://github.com/ansible-collections/community.general/pull/3075).
      - lxd inventory plugin - when used with Python 2, the plugin now needs ``ipaddress``
        installed `from pypi <https://pypi.org/project/ipaddress/>`_ (https://github.com/ansible-collections/community.general/pull/2441).
      - scaleway_security_group_rule - when used with Python 2, the module now needs
        ``ipaddress`` installed `from pypi <https://pypi.org/project/ipaddress/>`_
        (https://github.com/ansible-collections/community.general/pull/2441).
      bugfixes:
      - _mount module utils - fixed the sanity checks (https://github.com/ansible-collections/community.general/pull/2883).
      - ali_instance_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - ansible_galaxy_install - the output value ``cmd_args`` was bringing the intermediate
        command used to gather the state, instead of the command that actually performed
        the state change (https://github.com/ansible-collections/community.general/pull/3655).
      - apache2_module - fix ``a2enmod``/``a2dismod`` detection, and error message
        when not found (https://github.com/ansible-collections/community.general/issues/3253).
      - archive - fixed ``exclude_path`` values causing incorrect archive root (https://github.com/ansible-collections/community.general/pull/2816).
      - archive - fixed improper file names for single file zip archives (https://github.com/ansible-collections/community.general/issues/2818).
      - archive - fixed incorrect ``state`` result value documentation (https://github.com/ansible-collections/community.general/pull/2816).
      - archive - fixed task failure when using the ``remove`` option with a ``path``
        containing nested files for ``format``s other than ``zip`` (https://github.com/ansible-collections/community.general/issues/2919).
      - archive - fixing archive root determination when longest common root is ``/``
        (https://github.com/ansible-collections/community.general/pull/3036).
      - composer - use ``no-interaction`` option when discovering available options
        to avoid an issue where composer hangs (https://github.com/ansible-collections/community.general/pull/2348).
      - consul_acl - update the hcl allowlist to include all supported options (https://github.com/ansible-collections/community.general/pull/2495).
      - consul_kv lookup plugin - allow to set ``recurse``, ``index``, ``datacenter``
        and ``token`` as keyword arguments (https://github.com/ansible-collections/community.general/issues/2124).
      - copr - fix chroot naming issues, ``centos-stream`` changed naming to ``centos-stream-<number>``
        (for exmaple ``centos-stream-8``) (https://github.com/ansible-collections/community.general/issues/2084,
        https://github.com/ansible-collections/community.general/pull/3237).
      - cpanm - also use ``LC_ALL`` to enforce locale choice (https://github.com/ansible-collections/community.general/pull/2731).
      - deploy_helper - improved parameter checking by using standard Ansible construct
        (https://github.com/ansible-collections/community.general/pull/3104).
      - django_manage - argument ``command`` is being splitted again as it should
        (https://github.com/ansible-collections/community.general/issues/3215).
      - django_manage - parameters ``apps`` and ``fixtures`` are now splitted instead
        of being used as a single argument (https://github.com/ansible-collections/community.general/issues/3333).
      - django_manage - refactor to call ``run_command()`` passing command as a list
        instead of string (https://github.com/ansible-collections/community.general/pull/3098).
      - ejabberd_user - replaced in-code check with ``required_if``, using ``get_bin_path()``
        for the command, passing args to ``run_command()`` as list instead of string
        (https://github.com/ansible-collections/community.general/pull/3093).
      - filesystem - repair ``reiserfs`` fstype support after adding it to integration
        tests (https://github.com/ansible-collections/community.general/pull/2472).
      - gitlab_deploy_key - fix idempotency on projects with multiple deploy keys
        (https://github.com/ansible-collections/community.general/pull/3473).
      - gitlab_deploy_key - fix the SSH Deploy Key being deleted accidentally while
        running task in check mode (https://github.com/ansible-collections/community.general/issues/3621,
        https://github.com/ansible-collections/community.general/pull/3622).
      - gitlab_group - avoid passing wrong value for ``require_two_factor_authentication``
        on creation when the option has not been specified (https://github.com/ansible-collections/community.general/pull/3453).
      - gitlab_group_members - ``get_group_id`` return the group ID by matching ``full_path``,
        ``path`` or ``name`` (https://github.com/ansible-collections/community.general/pull/3400).
      - gitlab_group_members - fixes issue when gitlab group has more then 20 members,
        pagination problem (https://github.com/ansible-collections/community.general/issues/3041).
      - gitlab_project - user projects are created using namespace ID now, instead
        of user ID (https://github.com/ansible-collections/community.general/pull/2881).
      - gitlab_project_members - ``get_project_id`` return the project id by matching
        ``full_path`` or ``name`` (https://github.com/ansible-collections/community.general/pull/3602).
      - gitlab_project_members - fixes issue when gitlab group has more then 20 members,
        pagination problem (https://github.com/ansible-collections/community.general/issues/3041).
      - idrac_redfish_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - influxdb_retention_policy - fix bug where ``INF`` duration values failed parsing
        (https://github.com/ansible-collections/community.general/pull/2385).
      - influxdb_user - allow creation of admin users when InfluxDB authentication
        is enabled but no other user exists on the database. In this scenario, InfluxDB
        1.x allows only ``CREATE USER`` queries and rejects any other query (https://github.com/ansible-collections/community.general/issues/2364).
      - influxdb_user - fix bug where an influxdb user has no privileges for 2 or
        more databases (https://github.com/ansible-collections/community.general/pull/2499).
      - influxdb_user - fix bug which removed current privileges instead of appending
        them to existing ones (https://github.com/ansible-collections/community.general/issues/2609,
        https://github.com/ansible-collections/community.general/pull/2614).
      - ini_file - fix Unicode processing for Python 2 (https://github.com/ansible-collections/community.general/pull/2875).
      - ini_file - fix inconsistency between empty value and no value (https://github.com/ansible-collections/community.general/issues/3031).
      - interfaces_file - no longer reporting change when none happened (https://github.com/ansible-collections/community.general/pull/3328).
      - inventory and vault scripts - change file permissions to make vendored inventory
        and vault scripts exectuable (https://github.com/ansible-collections/community.general/pull/2337).
      - ipa_* modules - fix environment fallback for ``ipa_host`` option (https://github.com/ansible-collections/community.general/issues/3560).
      - ipa_sudorule - call ``sudorule_add_allow_command`` method instead of  ``sudorule_add_allow_command_group``
        (https://github.com/ansible-collections/community.general/issues/2442).
      - iptables_state - call ``async_status`` action plugin rather than its module
        (https://github.com/ansible-collections/community.general/issues/2700).
      - iptables_state - fix a 'FutureWarning' in a regex and do some basic code clean
        up (https://github.com/ansible-collections/community.general/pull/2525).
      - iptables_state - fix a broken query of ``async_status`` result with current
        ansible-core development version (https://github.com/ansible-collections/community.general/issues/2627,
        https://github.com/ansible-collections/community.general/pull/2671).
      - iptables_state - fix initialization of iptables from null state when adressing
        more than one table (https://github.com/ansible-collections/community.general/issues/2523).
      - java_cert - fix issue with incorrect alias used on PKCS#12 certificate import
        (https://github.com/ansible-collections/community.general/pull/2560).
      - java_cert - import private key as well as public certificate from PKCS#12
        (https://github.com/ansible-collections/community.general/issues/2460).
      - java_keystore - add parameter ``keystore_type`` to control output file format
        and override ``keytool``'s default, which depends on Java version (https://github.com/ansible-collections/community.general/issues/2515).
      - jboss - fix the deployment file permission issue when Jboss server is running
        under non-root user. The deployment file is copied with file content only.
        The file permission is set to ``440`` and belongs to root user. When the JBoss
        ``WildFly`` server is running under non-root user, it is unable to read the
        deployment file (https://github.com/ansible-collections/community.general/pull/3426).
      - jenkins_build - examine presence of ``build_number`` before deleting a jenkins
        build (https://github.com/ansible-collections/community.general/pull/2850).
      - jenkins_plugin - use POST method for sending request to jenkins API when ``state``
        option is one of ``enabled``, ``disabled``, ``pinned``, ``unpinned``, or ``absent``
        (https://github.com/ansible-collections/community.general/issues/2510).
      - json_query filter plugin - avoid 'unknown type' errors for more Ansible internal
        types (https://github.com/ansible-collections/community.general/pull/2607).
      - keycloak_authentication - fix bug when two identical executions are in the
        same authentication flow (https://github.com/ansible-collections/community.general/pull/2904).
      - keycloak_authentication - fix bug, the requirement was always on ``DISABLED``
        when creating a new authentication flow (https://github.com/ansible-collections/community.general/pull/3330).
      - keycloak_client - update the check mode to not show differences resulting
        from sorting and default values relating to the properties, ``redirectUris``,
        ``attributes``, and ``protocol_mappers`` (https://github.com/ansible-collections/community.general/pull/3610).
      - keycloak_identity_provider - fix change detection when updating identity provider
        mappers (https://github.com/ansible-collections/community.general/pull/3538,
        https://github.com/ansible-collections/community.general/issues/3537).
      - keycloak_realm - ``ssl_required`` changed from a boolean type to accept the
        strings ``none``, ``external`` or ``all``. This is not a breaking change since
        the module always failed when a boolean was supplied (https://github.com/ansible-collections/community.general/pull/2693).
      - keycloak_realm - element type for ``events_listeners`` parameter should be
        ``string`` instead of ``dict`` (https://github.com/ansible-collections/community.general/pull/3231).
      - keycloak_realm - remove warning that ``reset_password_allowed`` needs to be
        marked as ``no_log`` (https://github.com/ansible-collections/community.general/pull/2694).
      - keycloak_role - quote role name when used in URL path to avoid errors when
        role names contain special characters (https://github.com/ansible-collections/community.general/issues/3535,
        https://github.com/ansible-collections/community.general/pull/3536).
      - launchd - fixed sanity check in the module's code (https://github.com/ansible-collections/community.general/pull/2960).
      - launchd - use private attribute to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - linode inventory plugin - fix default value of new option ``ip_style`` (https://github.com/ansible-collections/community.general/issues/3337).
      - linode_v4 - changed the error message to point to the correct bugtracker URL
        (https://github.com/ansible-collections/community.general/pull/2430).
      - logdns callback plugin - improve split call to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - logstash callback plugin - replace ``_option`` with ``context.CLIARGS`` to
        fix the plugin on ansible-base and ansible-core (https://github.com/ansible-collections/community.general/issues/2692).
      - lvol - fixed rounding errors (https://github.com/ansible-collections/community.general/issues/2370).
      - lvol - fixed size unit capitalization to match units used between different
        tools for comparison (https://github.com/ansible-collections/community.general/issues/2360).
      - lvol - honor ``check_mode`` on thinpool (https://github.com/ansible-collections/community.general/issues/2934).
      - macports - add ``stdout`` and ``stderr`` to return values (https://github.com/ansible-collections/community.general/issues/3499).
      - maven_artifact - improve split call to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - memcached cache plugin - change function argument names to fix sanity errors
        (https://github.com/ansible-collections/community.general/pull/3194).
      - memset_memstore_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - memset_server_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - modprobe - added additional checks to ensure module load/unload is effective
        (https://github.com/ansible-collections/community.general/issues/1608).
      - module_helper module utils - ``CmdMixin`` must also use ``LC_ALL`` to enforce
        locale choice (https://github.com/ansible-collections/community.general/pull/2731).
      - module_helper module utils - avoid failing when non-zero ``rc`` is present
        on regular exit (https://github.com/ansible-collections/community.general/pull/2912).
      - module_helper module utils - fixed change-tracking for dictionaries and lists
        (https://github.com/ansible-collections/community.general/pull/2951).
      - netapp module utils - remove always-true conditional to fix sanity errors
        (https://github.com/ansible-collections/community.general/pull/3194).
      - netcup_dns - use ``str(ex)`` instead of unreliable ``ex.message`` in exception
        handling to fix ``AttributeError`` in error cases (https://github.com/ansible-collections/community.general/pull/2590).
      - nmap inventory plugin - fix local variable error when cache is disabled (https://github.com/ansible-collections/community.general/issues/2512).
      - nmcli - added ip4/ip6 configuration arguments for ``sit`` and ``ipip`` tunnels
        (https://github.com/ansible-collections/community.general/issues/3238, https://github.com/ansible-collections/community.general/pull/3239).
      - nmcli - compare MAC addresses case insensitively to fix idempotency issue
        (https://github.com/ansible-collections/community.general/issues/2409).
      - nmcli - fixed ``dns6`` option handling so that it is treated as a list internally
        (https://github.com/ansible-collections/community.general/pull/3563).
      - nmcli - fixed ``ipv4.route-metric`` being in properties of type list (https://github.com/ansible-collections/community.general/pull/3563).
      - nmcli - fixes team-slave configuration by adding connection.slave-type (https://github.com/ansible-collections/community.general/issues/766).
      - nmcli - if type is ``bridge-slave`` add ``slave-type bridge`` to ``nmcli``
        command (https://github.com/ansible-collections/community.general/issues/2408).
      - npm - correctly handle cases where a dependency does not have a ``version``
        property because it is either missing or invalid (https://github.com/ansible-collections/community.general/issues/2917).
      - npm - when the ``version`` option is used the comparison of installed vs missing
        will use name@version instead of just name, allowing version specific updates
        (https://github.com/ansible-collections/community.general/issues/2021).
      - one_image - fix error message when renaming an image (https://github.com/ansible-collections/community.general/pull/3626).
      - one_template - change function argument name to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - one_vm - Allow missing NIC keys (https://github.com/ansible-collections/community.general/pull/2435).
      - oneview_datacenter_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_enclosure_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_ethernet_network_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_fc_network_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_fcoe_network_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_logical_interconnect_group_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_network_set_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - oneview_san_manager_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - online inventory plugin - improve split call to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - online module utils - improve split call to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - open_iscsi - calling ``run_command`` with arguments as ``list`` instead of
        ``str`` (https://github.com/ansible-collections/community.general/pull/3286).
      - openbsd_pkg - fix crash from ``KeyError`` exception when package installs,
        but ``pkg_add`` returns with a non-zero exit code (https://github.com/ansible-collections/community.general/pull/3336).
      - openbsd_pkg - fix regexp matching crash. This bug could trigger on package
        names with special characters, for example ``g++`` (https://github.com/ansible-collections/community.general/pull/3161).
      - opentelemetry callback plugin - validated the task result exception without
        crashing. Also simplifying code a bit (https://github.com/ansible-collections/community.general/pull/3450,
        https://github.com/ansible/ansible/issues/75726).
      - openwrt_init - calling ``run_command`` with arguments as ``list`` instead
        of ``str`` (https://github.com/ansible-collections/community.general/pull/3284).
      - ovir4 inventory script - improve configparser creation to avoid crashes for
        options without values (https://github.com/ansible-collections/community.general/issues/674).
      - packet_device - use generator to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - packet_sshkey - use generator to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - pacman - fix changed status when ignorepkg has been defined (https://github.com/ansible-collections/community.general/issues/1758).
      - pamd - code for ``state=updated`` when dealing with the pam module arguments,
        made no distinction between ``None`` and an empty list (https://github.com/ansible-collections/community.general/issues/3260).
      - pamd - fixed problem with files containing only one or two lines (https://github.com/ansible-collections/community.general/issues/2925).
      - pids - avoid crashes for older ``psutil`` versions, like on RHEL6 and RHEL7
        (https://github.com/ansible-collections/community.general/pull/2808).
      - pipx - ``state=inject`` was failing to parse the list of injected packages
        (https://github.com/ansible-collections/community.general/pull/3611).
      - pipx - set environment variable ``USE_EMOJI=0`` to prevent errors in platforms
        that do not support ``UTF-8`` (https://github.com/ansible-collections/community.general/pull/3611).
      - pipx - the output value ``cmd_args`` was bringing the intermediate command
        used to gather the state, instead of the command that actually performed the
        state change (https://github.com/ansible-collections/community.general/pull/3655).
      - pkgin - Fix exception encountered when all packages are already installed
        (https://github.com/ansible-collections/community.general/pull/3583).
      - pkgng - ``name=* state=latest`` check for upgrades did not count "Number of
        packages to be reinstalled" as a `changed` action, giving incorrect results
        in both regular and check mode (https://github.com/ansible-collections/community.general/pull/3526).
      - pkgng - an `earlier PR <https://github.com/ansible-collections/community.general/pull/3393>`_
        broke check mode so that the module always reports `not changed`. This is
        now fixed so that the module reports number of upgrade or install actions
        that would be performed (https://github.com/ansible-collections/community.general/pull/3526).
      - pkgng - the ``annotation`` functionality was broken and is now fixed, and
        now also works with check mode (https://github.com/ansible-collections/community.general/pull/3526).
      - proxmox inventory plugin - fixed parsing failures when some cluster nodes
        are offline (https://github.com/ansible-collections/community.general/issues/2931).
      - proxmox inventory plugin - fixed plugin failure when a ``qemu`` guest has
        no ``template`` key (https://github.com/ansible-collections/community.general/pull/3052).
      - proxmox_group_info - fix module crash if a ``group`` parameter is used (https://github.com/ansible-collections/community.general/pull/3649).
      - proxmox_kvm - clone operation should return the VMID of the target VM and
        not that of the source VM. This was failing when the target VM with the chosen
        name already existed (https://github.com/ansible-collections/community.general/pull/3266).
      - proxmox_kvm - fix parsing of Proxmox VM information with device info not containing
        a comma, like disks backed by ZFS zvols (https://github.com/ansible-collections/community.general/issues/2840).
      - proxmox_kvm - fix result of clone, now returns ``newid`` instead of ``vmid``
        (https://github.com/ansible-collections/community.general/pull/3034).
      - proxmox_kvm - fixed ``vmid`` return value when VM with ``name`` already exists
        (https://github.com/ansible-collections/community.general/issues/2648).
      - puppet - replace ``console` with ``stdout`` in ``logdest`` option when ``all``
        has been chosen (https://github.com/ansible-collections/community.general/issues/1190).
      - rax_facts - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - redfish_command - fix extraneous error caused by missing ``bootdevice`` argument
        when using the ``DisableBootOverride`` sub-command (https://github.com/ansible-collections/community.general/issues/3005).
      - redfish_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - redfish_utils module utils - do not attempt to change the boot source override
        mode if not specified by the user (https://github.com/ansible-collections/community.general/issues/3509/).
      - redfish_utils module utils - if a manager network property is not specified
        in the service, attempt to change the requested settings (https://github.com/ansible-collections/community.general/issues/3404/).
      - redfish_utils module utils - if given, add account ID of user that should
        be created to HTTP request (https://github.com/ansible-collections/community.general/pull/3343/).
      - redis cache - improved connection string parsing (https://github.com/ansible-collections/community.general/issues/497).
      - rhsm_release - fix the issue that module considers 8, 7Client and 7Workstation
        as invalid releases (https://github.com/ansible-collections/community.general/pull/2571).
      - saltstack connection plugin - fix function signature (https://github.com/ansible-collections/community.general/pull/3194).
      - scaleway module utils - improve split call to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - scaleway plugin inventory - fix ``JSON object must be str, not 'bytes'`` with
        Python 3.5 (https://github.com/ansible-collections/community.general/issues/2769).
      - smartos_image_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - snap - also use ``LC_ALL`` to enforce locale choice (https://github.com/ansible-collections/community.general/pull/2731).
      - snap - fix formatting of ``--channel`` argument when the ``channel`` option
        is used (https://github.com/ansible-collections/community.general/pull/3028).
      - snap - fix various bugs which prevented the module from working at all, and
        which resulted in ``state=absent`` fail on absent snaps (https://github.com/ansible-collections/community.general/issues/2835,
        https://github.com/ansible-collections/community.general/issues/2906, https://github.com/ansible-collections/community.general/pull/2912).
      - snap - fixed the order of the ``--classic`` parameter in the command line
        invocation (https://github.com/ansible-collections/community.general/issues/2916).
      - snap_alias - the output value ``cmd_args`` was bringing the intermediate command
        used to gather the state, instead of the command that actually performed the
        state change (https://github.com/ansible-collections/community.general/pull/3655).
      - snmp_facts - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - ssh_config - reduce stormssh searches based on host (https://github.com/ansible-collections/community.general/pull/2568/).
      - stacki_host - when adding a new server, ``rack`` and ``rank`` must be passed,
        and network parameters are optional (https://github.com/ansible-collections/community.general/pull/2681).
      - stackpath_compute inventory script - fix broken validation checks for client
        ID and client secret (https://github.com/ansible-collections/community.general/pull/2448).
      - supervisorctl - state ``signalled`` was not working (https://github.com/ansible-collections/community.general/pull/3068).
      - svr4pkg - convert string to a bytes-like object to avoid ``TypeError`` with
        Python 3 (https://github.com/ansible-collections/community.general/issues/2373).
      - taiga - some constructs in the module fixed to work also in Python 3 (https://github.com/ansible-collections/community.general/pull/3067).
      - terraform - ensure the workspace is set back to its previous value when the
        apply fails (https://github.com/ansible-collections/community.general/pull/2634).
      - tss lookup plugin - fixed backwards compatibility issue with ``python-tss-sdk``
        version <=0.0.5 (https://github.com/ansible-collections/community.general/issues/3192,
        https://github.com/ansible-collections/community.general/pull/3199).
      - tss lookup plugin - fixed incompatibility with ``python-tss-sdk`` version
        1.0.0 (https://github.com/ansible-collections/community.general/issues/3057,
        https://github.com/ansible-collections/community.general/pull/3139).
      - udm_dns_record - fixed managing of PTR records, which can never have worked
        before (https://github.com/ansible-collections/community.general/pull/3256).
      - ufw - use generator to fix sanity errors (https://github.com/ansible-collections/community.general/pull/3194).
      - utm_aaa_group_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - utm_ca_host_key_cert_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - utm_network_interface_address_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - utm_proxy_frontend_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - utm_proxy_location_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - vdo - boolean arguments now compared with proper ``true`` and ``false`` values
        instead of string representations like ``"yes"`` or ``"no"`` (https://github.com/ansible-collections/community.general/pull/3191).
      - xenserver_facts - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - xfconf - also use ``LC_ALL`` to enforce locale choice (https://github.com/ansible-collections/community.general/issues/2715).
      - xfconf_info - added support to check mode (https://github.com/ansible-collections/community.general/pull/3084).
      - yaml callback plugin - avoid modifying PyYAML so that other plugins using
        it on the controller, like the ``to_yaml`` filter, do not produce different
        output (https://github.com/ansible-collections/community.general/issues/3471,
        https://github.com/ansible-collections/community.general/pull/3478).
      - yum_versionlock - fix idempotency when using wildcard (asterisk) in ``name``
        option (https://github.com/ansible-collections/community.general/issues/2761).
      - zfs - certain ZFS properties, especially sizes, would lead to a task being
        falsely marked as "changed" even when no actual change was made (https://github.com/ansible-collections/community.general/issues/975,
        https://github.com/ansible-collections/community.general/pull/2454).
      - zfs - treated received properties as local (https://github.com/ansible-collections/community.general/pull/502).
      - zypper_repository - fix idempotency on adding repository with ``$releasever``
        and ``$basearch`` variables (https://github.com/ansible-collections/community.general/issues/1985).
      - zypper_repository - when an URL to a .repo file was provided in option ``repo=``
        and ``state=present`` only the first run was successful, future runs failed
        due to missing checks prior starting zypper. Usage of ``state=absent`` in
        combination with a .repo file was not working either (https://github.com/ansible-collections/community.general/issues/1791,
        https://github.com/ansible-collections/community.general/issues/3466).
      deprecated_features:
      - ali_instance_info - marked removal version of deprecated parameters ``availability_zone``
        and ``instance_names`` (https://github.com/ansible-collections/community.general/issues/2429).
      - bitbucket_* modules - ``username`` options have been deprecated in favor of
        ``workspace`` and will be removed in community.general 6.0.0 (https://github.com/ansible-collections/community.general/pull/2045).
      - dnsimple - python-dnsimple < 2.0.0 is deprecated and support for it will be
        removed in community.general 5.0.0 (https://github.com/ansible-collections/community.general/pull/2946#discussion_r667624693).
      - gitlab_group_members - setting ``gitlab_group`` to ``name`` or ``path`` is
        deprecated. Use ``full_path`` instead (https://github.com/ansible-collections/community.general/pull/3451).
      - keycloak_authentication - the return value ``flow`` is now deprecated and
        will be removed in community.general 6.0.0; use ``end_state`` instead (https://github.com/ansible-collections/community.general/pull/3280).
      - keycloak_group - the return value ``group`` is now deprecated and will be
        removed in community.general 6.0.0; use ``end_state`` instead (https://github.com/ansible-collections/community.general/pull/3280).
      - linode - parameter ``backupsenabled`` is deprecated and will be removed in
        community.general 5.0.0 (https://github.com/ansible-collections/community.general/pull/2410).
      - lxd_container - the current default value ``true`` of ``ignore_volatile_options``
        is deprecated and will change to ``false`` in community.general 6.0.0 (https://github.com/ansible-collections/community.general/pull/3429).
      - serverless - deprecating parameter ``functions`` because it was not used in
        the code (https://github.com/ansible-collections/community.general/pull/2845).
      - xfconf - deprecate the ``get`` state. The new module ``xfconf_info`` should
        be used instead (https://github.com/ansible-collections/community.general/pull/3049).
      major_changes:
      - 'bitbucket_* modules - ``client_id`` is no longer marked as ``no_log=true``.
        If you relied on its value not showing up in logs and output, please mark
        the whole tasks with ``no_log: true`` (https://github.com/ansible-collections/community.general/pull/2045).'
      minor_changes:
      - Avoid internal ansible-core module_utils in favor of equivalent public API
        available since at least Ansible 2.9 (https://github.com/ansible-collections/community.general/pull/2877).
      - ModuleHelper module utils - improved mechanism for customizing the calculation
        of ``changed`` (https://github.com/ansible-collections/community.general/pull/2514).
      - Remove unnecessary ``__init__.py`` files from ``plugins/`` (https://github.com/ansible-collections/community.general/pull/2632).
      - apache2_module - minor refactoring improving code quality, readability and
        speed (https://github.com/ansible-collections/community.general/pull/3106).
      - archive - added ``dest_state`` return value to describe final state of ``dest``
        after successful task execution (https://github.com/ansible-collections/community.general/pull/2913).
      - archive - added ``exclusion_patterns`` option to exclude files or subdirectories
        from archives (https://github.com/ansible-collections/community.general/pull/2616).
      - archive - refactoring prior to fix for idempotency checks. The fix will be
        a breaking change and only appear in community.general 4.0.0 (https://github.com/ansible-collections/community.general/pull/2987).
      - bitbucket_* modules - add ``user`` and ``password`` options for Basic authentication
        (https://github.com/ansible-collections/community.general/pull/2045).
      - chroot connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - cloud_init_data_facts - minor refactor (https://github.com/ansible-collections/community.general/pull/2557).
      - cmd (Module Helper) module utils - ``CmdMixin`` now pulls the value for ``run_command()``
        params from ``self.vars``, as opposed to previously retrieving those from
        ``self.module.params`` (https://github.com/ansible-collections/community.general/pull/2517).
      - composer - add ``composer_executable`` option (https://github.com/ansible-collections/community.general/issues/2649).
      - datadog_event - adding parameter ``api_host`` to allow selecting a datadog
        API endpoint instead of using the default one (https://github.com/ansible-collections/community.general/issues/2774,
        https://github.com/ansible-collections/community.general/pull/2775).
      - datadog_monitor - allow creation of composite datadog monitors (https://github.com/ansible-collections/community.general/issues/2956).
      - dig lookup plugin - add ``retry_servfail`` option (https://github.com/ansible-collections/community.general/pull/3247).
      - dnsimple - module rewrite to include support for python-dnsimple>=2.0.0; also
        add ``sandbox`` parameter (https://github.com/ansible-collections/community.general/pull/2946).
      - elastic callback plugin - enriched the stacktrace information with the ``message``,
        ``exception`` and ``stderr`` fields from the failed task (https://github.com/ansible-collections/community.general/pull/3556).
      - filesystem - cleanup and revamp module, tests and doc. Pass all commands to
        ``module.run_command()`` as lists. Move the device-vs-mountpoint logic to
        ``grow()`` method. Give to all ``get_fs_size()`` the same logic and error
        handling. (https://github.com/ansible-collections/community.general/pull/2472).
      - filesystem - extend support for FreeBSD. Avoid potential data loss by checking
        existence of a filesystem with ``fstyp`` (native command) if ``blkid`` (foreign
        command) doesn't find one. Add support for character devices and ``ufs`` filesystem
        type (https://github.com/ansible-collections/community.general/pull/2902).
      - flatpak - add ``no_dependencies`` parameter (https://github.com/ansible/ansible/pull/55452,
        https://github.com/ansible-collections/community.general/pull/2751).
      - flatpak - allows installing or uninstalling a list of packages (https://github.com/ansible-collections/community.general/pull/2521).
      - funcd connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - gem - add ``bindir`` option to specify an installation path for executables
        such as ``/home/user/bin`` or ``/home/user/.local/bin`` (https://github.com/ansible-collections/community.general/pull/2837).
      - gem - add ``norc`` option to avoid loading any ``.gemrc`` file (https://github.com/ansible-collections/community.general/pull/2837).
      - github_repo - add new option ``api_url``  to allow working with on premises
        installations (https://github.com/ansible-collections/community.general/pull/3038).
      - gitlab_group - add new options ``project_creation_level``, ``auto_devops_enabled``,
        ``subgroup_creation_level`` (https://github.com/ansible-collections/community.general/pull/3248).
      - gitlab_group - add new property ``require_two_factor_authentication`` (https://github.com/ansible-collections/community.general/pull/3367).
      - gitlab_group_members - ``gitlab_user`` can now also be a list of users (https://github.com/ansible-collections/community.general/pull/3047).
      - gitlab_group_members - added functionality to set all members exactly as given
        (https://github.com/ansible-collections/community.general/pull/3047).
      - gitlab_project - add new options ``allow_merge_on_skipped_pipeline``, ``only_allow_merge_if_all_discussions_are_resolved``,
        ``only_allow_merge_if_pipeline_succeeds``, ``packages_enabled``, ``remove_source_branch_after_merge``,
        ``squash_option`` (https://github.com/ansible-collections/community.general/pull/3002).
      - gitlab_project - add new properties ``ci_config_path`` and ``shared_runners_enabled``
        (https://github.com/ansible-collections/community.general/pull/3379).
      - gitlab_project - projects can be created under other user's namespaces with
        the new ``username`` option (https://github.com/ansible-collections/community.general/pull/2824).
      - gitlab_project_members - ``gitlab_user`` can now also be a list of users (https://github.com/ansible-collections/community.general/pull/3319).
      - gitlab_project_members - added functionality to set all members exactly as
        given (https://github.com/ansible-collections/community.general/pull/3319).
      - gitlab_runner - support project-scoped gitlab.com runners registration (https://github.com/ansible-collections/community.general/pull/634).
      - gitlab_user - add ``expires_at`` option (https://github.com/ansible-collections/community.general/issues/2325).
      - gitlab_user - add functionality for adding external identity providers to
        a GitLab user (https://github.com/ansible-collections/community.general/pull/2691).
      - gitlab_user - allow to reset an existing password with the new ``reset_password``
        option (https://github.com/ansible-collections/community.general/pull/2691).
      - gitlab_user - specifying a password is no longer necessary (https://github.com/ansible-collections/community.general/pull/2691).
      - gunicorn - search for ``gunicorn`` binary in more paths (https://github.com/ansible-collections/community.general/pull/3092).
      - hana_query - added the abillity to use hdbuserstore (https://github.com/ansible-collections/community.general/pull/3125).
      - hpilo_info - added ``host_power_status`` return value to report power state
        of machine with ``OFF``, ``ON`` or ``UNKNOWN`` (https://github.com/ansible-collections/community.general/pull/3079).
      - idrac_redfish_config - modified set_manager_attributes function to skip invalid
        attribute instead of returning. Added skipped attributes to output. Modified
        module exit to add warning variable (https://github.com/ansible-collections/community.general/issues/1995).
      - influxdb_retention_policy - add ``state`` parameter with allowed values ``present``
        and ``absent`` to support deletion of existing retention policies (https://github.com/ansible-collections/community.general/issues/2383).
      - influxdb_retention_policy - simplify duration logic parsing (https://github.com/ansible-collections/community.general/pull/2385).
      - ini_file - add abbility to define multiple options with the same name but
        different values (https://github.com/ansible-collections/community.general/issues/273,
        https://github.com/ansible-collections/community.general/issues/1204).
      - ini_file - add module option ``exclusive`` (boolean) for the ability to add/remove
        single ``option=value`` entries without overwriting existing options with
        the same name but different values (https://github.com/ansible-collections/community.general/pull/3033).
      - ini_file - opening file with encoding ``utf-8-sig`` (https://github.com/ansible-collections/community.general/issues/2189).
      - interfaces_file - minor refactor (https://github.com/ansible-collections/community.general/pull/3328).
      - iocage connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - ipa_config - add ``ipaselinuxusermaporder`` option to set the SELinux user
        map order (https://github.com/ansible-collections/community.general/pull/3178).
      - ipa_group - add ``append`` option for adding group and users members, instead
        of replacing the respective lists (https://github.com/ansible-collections/community.general/pull/3545).
      - jail connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - java_keystore - added ``ssl_backend`` parameter for using the cryptography
        library instead of the OpenSSL binary (https://github.com/ansible-collections/community.general/pull/2485).
      - java_keystore - replace envvar by stdin to pass secret to ``keytool`` (https://github.com/ansible-collections/community.general/pull/2526).
      - jenkins_build - support stopping a running jenkins build (https://github.com/ansible-collections/community.general/pull/2850).
      - jenkins_job_info - the ``password`` and ``token`` parameters can also be omitted
        to retrieve only public information (https://github.com/ansible-collections/community.general/pull/2948).
      - jenkins_plugin - add fallback url(s) for failure of plugin installation/download
        (https://github.com/ansible-collections/community.general/pull/1334).
      - jira - add comment visibility parameter for comment operation (https://github.com/ansible-collections/community.general/pull/2556).
      - kernel_blacklist - revamped the module using ``ModuleHelper`` (https://github.com/ansible-collections/community.general/pull/3329).
      - keycloak_* modules - refactor many of the ``keycloak_*`` modules to have similar
        structures, comments, and documentation (https://github.com/ansible-collections/community.general/pull/3280).
      - keycloak_authentication - enhanced diff mode to also return before and after
        state when the authentication flow is updated (https://github.com/ansible-collections/community.general/pull/2963).
      - keycloak_client - add ``authentication_flow_binding_overrides`` option (https://github.com/ansible-collections/community.general/pull/2949).
      - keycloak_realm - add ``events_enabled`` parameter to allow activation or deactivation
        of login events (https://github.com/ansible-collections/community.general/pull/3231).
      - linode - added proper traceback when failing due to exceptions (https://github.com/ansible-collections/community.general/pull/2410).
      - linode - parameter ``additional_disks`` is now validated as a list of dictionaries
        (https://github.com/ansible-collections/community.general/pull/2410).
      - linode inventory plugin - adds the ``ip_style`` configuration key. Set to
        ``api`` to get more detailed network details back from the remote Linode host
        (https://github.com/ansible-collections/community.general/pull/3203).
      - lxc connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - lxd_container - add ``ignore_volatile_options`` option which allows to disable
        the behavior that the module ignores options starting with ``volatile.`` (https://github.com/ansible-collections/community.general/pull/3331).
      - mail - added the ``ehlohost`` parameter which allows for manual override of
        the host used in SMTP EHLO (https://github.com/ansible-collections/community.general/pull/3425).
      - maven_artifact - added ``checksum_alg`` option to support SHA1 checksums in
        order to support FIPS systems (https://github.com/ansible-collections/community.general/pull/2662).
      - module_helper cmd module utils - added the ``ArgFormat`` style ``BOOLEAN_NOT``,
        to add CLI parameters when the module argument is false-ish (https://github.com/ansible-collections/community.general/pull/3290).
      - module_helper module utils - added feature flag parameter to ``CmdMixin``
        to control whether ``cmd_args`` is automatically added to the module output
        (https://github.com/ansible-collections/community.general/pull/3648).
      - module_helper module utils - added feature flag parameters to ``CmdMixin``
        to control whether ``rc``, ``out`` and ``err`` are automatically added to
        the module output (https://github.com/ansible-collections/community.general/pull/2922).
      - module_helper module utils - break down of the long file into smaller pieces
        (https://github.com/ansible-collections/community.general/pull/2393).
      - module_helper module utils - method ``CmdMixin.run_command()`` now accepts
        ``process_output`` specifying a function to process the outcome of the underlying
        ``module.run_command()`` (https://github.com/ansible-collections/community.general/pull/2564).
      - module_helper module_utils - added classmethod to trigger the execution of
        MH modules (https://github.com/ansible-collections/community.general/pull/3206).
      - nmcli - add ``disabled`` value to ``method6`` option (https://github.com/ansible-collections/community.general/issues/2730).
      - nmcli - add ``dummy`` interface support (https://github.com/ansible-collections/community.general/issues/724).
      - nmcli - add ``gre`` tunnel support (https://github.com/ansible-collections/community.general/issues/3105,
        https://github.com/ansible-collections/community.general/pull/3262).
      - nmcli - add ``gsm`` support (https://github.com/ansible-collections/community.general/pull/3313).
      - nmcli - add ``routing_rules4`` and ``may_fail4`` options (https://github.com/ansible-collections/community.general/issues/2730).
      - nmcli - add ``runner`` and ``runner_hwaddr_policy`` options (https://github.com/ansible-collections/community.general/issues/2901).
      - nmcli - add ``wifi-sec`` option change detection to support managing secure
        Wi-Fi connections (https://github.com/ansible-collections/community.general/pull/3136).
      - nmcli - add ``wifi`` option to support managing Wi-Fi settings such as ``hidden``
        or ``mode`` (https://github.com/ansible-collections/community.general/pull/3081).
      - nmcli - add new options to ignore automatic DNS servers and gateways (https://github.com/ansible-collections/community.general/issues/1087).
      - nmcli - query ``nmcli`` directly to determine available WiFi options (https://github.com/ansible-collections/community.general/pull/3141).
      - nmcli - remove dead code, ``options`` never contains keys from ``param_alias``
        (https://github.com/ansible-collections/community.general/pull/2417).
      - nmcli - the option ``routing_rules4`` can now be specified as a list of strings,
        instead of as a single string (https://github.com/ansible-collections/community.general/issues/3401).
      - nrdp callback plugin - parameters are now converted to strings, except ``validate_certs``
        which is converted to boolean (https://github.com/ansible-collections/community.general/pull/2878).
      - onepassword lookup plugin - add ``domain`` option (https://github.com/ansible-collections/community.general/issues/2734).
      - open-iscsi - adding support for mutual authentication between target and initiator
        (https://github.com/ansible-collections/community.general/pull/3422).
      - open_iscsi - add ``auto_portal_startup`` parameter to allow ``node.startup``
        setting per portal (https://github.com/ansible-collections/community.general/issues/2685).
      - open_iscsi - also consider ``portal`` and ``port`` to check if already logged
        in or not (https://github.com/ansible-collections/community.general/issues/2683).
      - open_iscsi - minor refactoring (https://github.com/ansible-collections/community.general/pull/3286).
      - opentelemetry callback plugin - added option ``enable_from_environment`` to
        support enabling the plugin only if the given environment variable exists
        and it is set to true (https://github.com/ansible-collections/community.general/pull/3498).
      - opentelemetry callback plugin - enriched the span attributes with HTTP metadata
        for those Ansible tasks that interact with third party systems (https://github.com/ansible-collections/community.general/pull/3448).
      - opentelemetry callback plugin - enriched the stacktrace information for loops
        with the ``message``, ``exception`` and ``stderr`` fields from the failed
        item in the tasks in addition to the name of the task and failed item (https://github.com/ansible-collections/community.general/pull/3599).
      - opentelemetry callback plugin - enriched the stacktrace information with the
        ``message``, ``exception`` and ``stderr`` fields from the failed task (https://github.com/ansible-collections/community.general/pull/3496).
      - opentelemetry callback plugin - transformed args in a list of span attributes
        in addition it redacted username and password from any URLs (https://github.com/ansible-collections/community.general/pull/3564).
      - openwrt_init - minor refactoring (https://github.com/ansible-collections/community.general/pull/3284).
      - opkg - allow ``name`` to be a YAML list of strings (https://github.com/ansible-collections/community.general/issues/572,
        https://github.com/ansible-collections/community.general/pull/3554).
      - pacman - add ``executable`` option to use an alternative pacman binary (https://github.com/ansible-collections/community.general/issues/2524).
      - pacman - speed up checking if the package is installed, when the latest version
        check is not needed (https://github.com/ansible-collections/community.general/pull/3606).
      - pamd - minor refactorings (https://github.com/ansible-collections/community.general/pull/3285).
      - passwordstore lookup - add option ``missing`` to choose what to do if the
        password file is missing (https://github.com/ansible-collections/community.general/pull/2500).
      - pids - refactor to add support for older ``psutil`` versions to the ``pattern``
        option (https://github.com/ansible-collections/community.general/pull/3315).
      - pipx - minor refactor on the ``changed`` logic (https://github.com/ansible-collections/community.general/pull/3647).
      - pkgin - in case of ``pkgin`` tool failue, display returned standard output
        ``stdout`` and standard error ``stderr`` to ease debugging (https://github.com/ansible-collections/community.general/issues/3146).
      - pkgng - ``annotation`` can now also be a YAML list (https://github.com/ansible-collections/community.general/pull/3526).
      - pkgng - packages being installed (or upgraded) are acted on in one command
        (per action) (https://github.com/ansible-collections/community.general/issues/2265).
      - pkgng - status message specifies number of packages installed and/or upgraded
        separately. Previously, all changes were reported as one count of packages
        "added" (https://github.com/ansible-collections/community.general/pull/3393).
      - proxmox inventory plugin - added snapshots to host facts (https://github.com/ansible-collections/community.general/pull/3044).
      - proxmox_group_info - minor refactor (https://github.com/ansible-collections/community.general/pull/2557).
      - proxmox_kvm - minor refactor (https://github.com/ansible-collections/community.general/pull/2557).
      - qubes connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - rax_mon_notification_plan - fixed validation checks by specifying type ``str``
        as the ``elements`` of parameters ``ok_state``, ``warning_state`` and ``critical_state``
        (https://github.com/ansible-collections/community.general/pull/2955).
      - redfish_command - add ``boot_override_mode`` argument to BootSourceOverride
        commands (https://github.com/ansible-collections/community.general/issues/3134).
      - redfish_command and redfish_config and redfish_utils module utils - add parameter
        to strip etag of quotes before patch, since some vendors do not properly ``If-Match``
        etag with quotes (https://github.com/ansible-collections/community.general/pull/3296).
      - redfish_config - modified module exit to add warning variable (https://github.com/ansible-collections/community.general/issues/1995).
      - redfish_info - include ``Status`` property for Thermal objects when querying
        Thermal properties via ``GetChassisThermals`` command (https://github.com/ansible-collections/community.general/issues/3232).
      - redfish_utils module utils - modified set_bios_attributes function to skip
        invalid attribute instead of returning. Added skipped attributes to output
        (https://github.com/ansible-collections/community.general/issues/1995).
      - redhat_subscription - add ``server_prefix`` and ``server_port`` parameters
        (https://github.com/ansible-collections/community.general/pull/2779).
      - redis - allow to use the term ``replica`` instead of ``slave``, which has
        been the official Redis terminology since 2018 (https://github.com/ansible-collections/community.general/pull/2867).
      - rhevm - minor refactor (https://github.com/ansible-collections/community.general/pull/2557).
      - saltstack connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - scaleway plugin inventory - parse scw-cli config file for ``oauth_token``
        (https://github.com/ansible-collections/community.general/pull/3250).
      - serverless - minor refactor (https://github.com/ansible-collections/community.general/pull/2557).
      - slack - minor refactoring (https://github.com/ansible-collections/community.general/pull/3205).
      - snap - added ``enabled`` and ``disabled`` states (https://github.com/ansible-collections/community.general/issues/1990).
      - snap - improved module error handling, especially for the case when snap server
        is down (https://github.com/ansible-collections/community.general/issues/2970).
      - splunk callback plugin - add ``batch`` option for user-configurable correlation
        ID's (https://github.com/ansible-collections/community.general/issues/2790).
      - spotinst_aws_elastigroup - elements of list parameters are now validated (https://github.com/ansible-collections/community.general/pull/2355).
      - ssh_config - new feature to set ``ForwardAgent`` option to ``yes`` or ``no``
        (https://github.com/ansible-collections/community.general/issues/2473).
      - stacki_host - minor refactoring (https://github.com/ansible-collections/community.general/pull/2681).
      - supervisorctl - add the possibility to restart all programs and program groups
        (https://github.com/ansible-collections/community.general/issues/3551).
      - supervisorctl - using standard Ansible mechanism to validate ``signalled``
        state required parameter (https://github.com/ansible-collections/community.general/pull/3068).
      - terraform - add ``check_destroy`` optional parameter to check for deletion
        of resources before it is applied (https://github.com/ansible-collections/community.general/pull/2874).
      - terraform - add ``parallelism`` parameter (https://github.com/ansible-collections/community.general/pull/3540).
      - terraform - add option ``overwrite_init`` to skip init if exists (https://github.com/ansible-collections/community.general/pull/2573).
      - terraform - minor refactor (https://github.com/ansible-collections/community.general/pull/2557).
      - timezone - print error message to debug instead of warning when timedatectl
        fails (https://github.com/ansible-collections/community.general/issues/1942).
      - tss lookup plugin - added ``token`` parameter for token authorization; ``username``
        and ``password`` are optional when ``token`` is provided (https://github.com/ansible-collections/community.general/pull/3327).
      - tss lookup plugin - added new parameter for domain authorization (https://github.com/ansible-collections/community.general/pull/3228).
      - tss lookup plugin - refactored to decouple the supporting third-party library
        (``python-tss-sdk``) (https://github.com/ansible-collections/community.general/pull/3252).
      - ufw - if ``delete=true`` and ``insert`` option is present, then ``insert``
        is now ignored rather than failing with a syntax error (https://github.com/ansible-collections/community.general/pull/3514).
      - vdo - minor refactoring of the code (https://github.com/ansible-collections/community.general/pull/3191).
      - zfs - added diff mode support (https://github.com/ansible-collections/community.general/pull/502).
      - zfs_delegate_admin - drop choices from permissions, allowing any permission
        supported by the underlying zfs commands (https://github.com/ansible-collections/community.general/pull/2540).
      - zone connection - minor refactor to make lints and IDEs happy (https://github.com/ansible-collections/community.general/pull/2520).
      - zpool_facts - minor refactoring (https://github.com/ansible-collections/community.general/pull/3332).
      - zypper - prefix zypper commands with ``/sbin/transactional-update --continue
        --drop-if-no-change --quiet run`` if transactional updates are detected (https://github.com/ansible-collections/community.general/issues/3159).
      release_summary: This is release 4.0.0 of ``community.general``, released on
        2021-11-02.
      removed_features:
      - All inventory and vault scripts contained in community.general were moved
        to the `contrib-scripts GitHub repository <https://github.com/ansible-community/contrib-scripts>`_
        (https://github.com/ansible-collections/community.general/pull/2696).
      - ModuleHelper module utils - remove fallback when value could not be determined
        for a parameter (https://github.com/ansible-collections/community.general/pull/3461).
      - Removed deprecated netapp module utils and doc fragments (https://github.com/ansible-collections/community.general/pull/3197).
      - The nios, nios_next_ip, nios_next_network lookup plugins, the nios documentation
        fragment, and the nios_host_record, nios_ptr_record, nios_mx_record, nios_fixed_address,
        nios_zone, nios_member, nios_a_record, nios_aaaa_record, nios_network, nios_dns_view,
        nios_txt_record, nios_naptr_record, nios_srv_record, nios_cname_record, nios_nsgroup,
        and nios_network_view module have been removed from community.general 4.0.0
        and were replaced by redirects to the `infoblox.nios_modules <https://galaxy.ansible.com/infoblox/nios_modules>`_
        collection. Please install the ``infoblox.nios_modules`` collection to continue
        using these plugins and modules, and update your FQCNs (https://github.com/ansible-collections/community.general/pull/3592).
      - The vendored copy of ``ipaddress`` has been removed. Please use ``ipaddress``
        from the Python 3 standard library, or `from pypi <https://pypi.org/project/ipaddress/>`_.
        (https://github.com/ansible-collections/community.general/pull/2441).
      - cpanm - removed the deprecated ``system_lib`` option. Use Ansible's privilege
        escalation mechanism instead; the option basically used ``sudo`` (https://github.com/ansible-collections/community.general/pull/3461).
      - grove - removed the deprecated alias ``message`` of the ``message_content``
        option (https://github.com/ansible-collections/community.general/pull/3461).
      - proxmox - default value of ``proxmox_default_behavior`` changed to ``no_defaults``
        (https://github.com/ansible-collections/community.general/pull/3461).
      - proxmox_kvm - default value of ``proxmox_default_behavior`` changed to ``no_defaults``
        (https://github.com/ansible-collections/community.general/pull/3461).
      - runit - removed the deprecated ``dist`` option which was not used by the module
        (https://github.com/ansible-collections/community.general/pull/3461).
      - telegram - removed the deprecated ``msg``, ``msg_format`` and ``chat_id``
        options (https://github.com/ansible-collections/community.general/pull/3461).
      - xfconf - the default value of ``disable_facts`` changed to ``true``, and the
        value ``false`` is no longer allowed. Register the module results instead
        (https://github.com/ansible-collections/community.general/pull/3461).
      security_fixes:
      - nmcli - do not pass WiFi secrets on the ``nmcli`` command line. Use ``nmcli
        con edit`` instead and pass secrets as ``stdin`` (https://github.com/ansible-collections/community.general/issues/3145).
    fragments:
    - 1085-consul-acl-hcl-whitelist-update.yml
    - 1334-jenkins-plugin-fallback-urls.yaml
    - 1942_timezone.yml
    - 2045-bitbucket_support_basic_auth.yaml
    - 2126-consul_kv-pass-token.yml
    - 2284-influxdb_retention_policy-fix_duration_parsing.yml
    - 2323-groupby_as_dict-filter.yml
    - 2334-redfish_config-skip-incorrect-attributes.yml
    - 2337-mark-inventory-scripts-executable.yml
    - 2348-composer-no-interaction-option-discovery-to-avoid-hang.yaml
    - 2355-spotinst_aws_elastigroup-list-elements.yml
    - 2364-influxdb_user-first_user.yml
    - 2369-lvol_size_bug_fixes.yml
    - 2373-svr4pkg-fix-typeerror.yml
    - 2383-influxdb_retention_policy-add-state-option.yml
    - 2393-module_helper-breakdown.yml
    - 2407-puppet-change_stdout_to_console.yaml
    - 2409-nmcli_add_slave-type_bridge_to_nmcli_command_if_type_is_bridge-slave.yml
    - 2410-linode-improvements.yml
    - 2411-snap-revamp-enabled-disabled-states.yml
    - 2416-nmcli_compare_mac_addresses_case_insensitively.yml
    - 2417-nmcli_remove_dead_code.yml
    - 2430-linodev4-error-message.yml
    - 2435-one_vm-fix_missing_keys.yml
    - 2448-stackpath_compute-fix.yml
    - 2450-gitlab_user-add_expires_at_option.yaml
    - 2454-detect_zfs_changed.yml
    - 2461-ovirt4-fix-configparser.yml
    - 2472_filesystem_module_revamp.yml
    - 2485-java_keystore-ssl_backend-parameter.yml
    - 2499-influxdb_user-fix-multiple-no-privileges.yml
    - 2500-passwordstore-add_option_ignore_missing.yml
    - 2510-jenkins_plugin_use_post_method.yml
    - 2514-mh-improved-changed.yml
    - 2516_fix_2515_keystore_type_jks.yml
    - 2517-cmd-params-from-vars.yml
    - 2518-nmap-fix-cache-disabled.yml
    - 2520-connection-refactors.yml
    - 2521-flatpak-list.yml
    - 2524-pacman_add_bin_option.yml
    - 2525-iptables_state-fix-initialization-command.yml
    - 2526-java_keystore-password-via-stdin.yml
    - 2540-zfs-delegate-choices.yml
    - 2556-add-comment_visibility-parameter-for-comment-operation-of-jira-module.yml
    - 2557-cloud-misc-refactor.yml
    - 2560-java_cert-pkcs12-alias-bugfix.yml
    - 2564-mh-cmd-process-output.yml
    - 2568-ssh_config-reduce-stormssh-searches-based-on-host.yml
    - 2571-rhsm_release-fix-release_matcher.yaml
    - 2573-terraform-overwrite-init.yml
    - 2578-ini-file-utf8-bom.yml
    - 2579-redis-cache-ipv6.yml
    - 2590-netcup_dns-exception-no-message-attr.yml
    - 2614-influxdb_user-fix-issue-introduced-in-PR#2499.yml
    - 2616-archive-exclusion_patterns-option.yml
    - 2632-cleanup.yml
    - 2634-terraform-switch-workspace.yml
    - 2635-nmcli-add-ignore-auto-arguments.yml
    - 2648-proxmox_kvm-fix-vmid-return-value.yml
    - 2650-composer-add_composer_executable.yml
    - 2661-maven_artifact-add-sha1-option.yml
    - 2671-fix-broken-query-of-async_status-result.yml
    - 2681-stacki-host-bugfix.yml
    - 2684-open_iscsi-single-target-multiple-portal-overrides.yml
    - 2691-gitlab_user-support-identity-provider.yml
    - 2692-logstash-callback-plugin-replacing_options.yml
    - 2711-fix-iptables_state-2700-async_status-call.yml
    - 2722-zypper_repository-fix_idempotency_on_adding_repo_with_releasever.yml
    - 273-add_multiple_options_with_same_name_to_ini_file.yml
    - 2731-mh-cmd-locale.yml
    - 2732-nmcli_add_options.yml
    - 2735-onepassword-add_domain_option.yml
    - 2751-flatpak-no_dependencies.yml
    - 2771-scaleway_inventory_json_accept_byte_array.yml
    - 2774-datadog_event_api_parameter.yml
    - 2779_redhat_subscription-add_server_prefix_and_server_port.yml
    - 2787-yum_versionlock-fix_idempotency_when_using_wildcard.yml
    - 2790-callback_splunk-batch-option.yml
    - 2808-pids-older-psutil.yml
    - 2816-archive-refactor.yml
    - 2821-ipa_sudorule.yml
    - 2824-gitlab_project-project-under-user.yml
    - 2827-nmcli_fix_team_slave.yml
    - 2830-npm-version-update.yml
    - 2841-proxmox_kvm_zfs_devstr.yml
    - 2843-modprobe-failure-conditions.yml
    - 2844-ali_instance_info-deprecate-params.yml
    - 2845-serverless-deprecate-functions-param.yml
    - 2850-jenkins_build-support-stop-jenkins-build.yml
    - 2867-redis-terminology.yml
    - 2874-terraform-check-destroy.yml
    - 2875-ini_file-unicode.yml
    - 2878-validate-certs-bool.yml
    - 2881-gitlab_project-fix_workspace_user.yaml
    - 2883-_mount-fixed-sanity-checks.yml
    - 2901-nmcli_teaming.yml
    - 2902-filesystem_extend_freebsd_support.yml
    - 2904-fix-bug-when-2-identical-executions-in-same-auth-flow.yml
    - 2912-snap-module-helper.yml
    - 2913-archive-dest_state.yml
    - 2918-snap-param-order.yml
    - 2922-mh-cmd-output-feature-flag.yml
    - 2923-archive-remove-bugfix.yml
    - 2924-npm-fix-package-json.yml
    - 2935-lvol-support_check_mode_thinpool.yml
    - 2936-pacman-fix_changed_status_when_ignorepkg_has_been_defined.yml
    - 2946-python-dnsimple-v2-rewrite.yml
    - 2948-jenkins_job_info-remove_necessities_on_password_or_token.yml
    - 2949-add_authentication-flow-binding_keycloak-client.yml
    - 2951-mh-vars-deepcopy.yml
    - 2955-rax_mon_notification_plan-added-elements-to-list-params.yaml
    - 2958-datadog_monitor_support_composites.yml
    - 2960-launchd-validation-check.yaml
    - 2963-improve-diff-mode-on-keycloak_authentication.yml
    - 2967-proxmox_inventory-offline-node-fix.yml
    - 2987-archive-stage-idempotency-fix.yml
    - 2989-pamd-single-line.yaml
    - 3001-enhance_gitlab_module.yml
    - 3006-redfish_command-bootoverride-argument-check.yaml
    - 3028-snap-channel.yml
    - 3034-promox-kvm-return-new-id.yaml
    - 3036-archive-root-path-fix.yml
    - 3038-enhance_github_repo_api_url.yml
    - 3041-fix_gitlab_group_members_gitlab_project_mambers.yml
    - 3041-gitlab_x_members_fix_and_enhancement.yml
    - 3044-proxmox-inventory-snapshots.yml
    - 3049-xfconf-deprecate-get.yaml
    - 3052_proxmox_inventory_plugin.yml
    - 3067-taiga-bugfix.yaml
    - 3068-supervisorctl-bugfix.yaml
    - 3074-ini_file-3031-empty-value-inconsistency.yml
    - 3075-archive-idempotency-enhancements.yml
    - 3079-report-power-state-hpilo.yaml
    - 3080-java_cert-2460-import_private_key.yml
    - 3081-add-wifi-option-to-nmcli-module.yml
    - 3084-info-checkmode.yaml
    - 3092-gunicorn-refactor.yaml
    - 3093-ejabberd_user-refactor.yaml
    - 3098-django_manage-cmd-list.yaml
    - 3104-deploy_helper-required_if.yaml
    - 3106-apache2_module-review.yaml
    - 3125-hana-query-userstore.yaml
    - 3132-nmcli-dummy.yaml
    - 3135-add-redfish_command-bootoverridemode.yaml
    - 3136-add-wifi-sec-change-detection-to-nmcli-module.yml
    - 3139-tss-lookup-plugin-update-to-make-compatible-with-sdk-v1.yml
    - 3141-disallow-options-unsupported-by-nmcli.yml
    - 3160-pass-wifi-secrets-via-stdin-to-nmcli-module.yml
    - 3161-openbsd-pkg-fix-regexp-matching-crash.yml
    - 3164-zypper-support-transactional-updates.yaml
    - 3178-add-ipaselinuxusermaporder-to-ipa-config-module.yml
    - 3191-vdo-refactor.yml
    - 3194-sanity.yml
    - 3199-tss-lookup-plugin-bugfix-for-backwards-compatibility.yml
    - 3203-linode-inventory-return-full-api-ip-data.yml
    - 3205-slack-minor-refactor.yaml
    - 3206-mh-classmethod.yaml
    - 3211-snap-error-handling.yml
    - 3228-tss-domain-authorization.yml
    - 3231-fix-keycloak-realm-events.yml
    - 3233-include-thermal-sensor-status-via-redfish_info.yaml
    - 3237-copr-fix_chroot_naming.yml
    - 3239-nmcli-sit-ipip-config-bugfix.yaml
    - 3247-retry_servfail-for-dig.yaml
    - 3248-adds-few-more-gitlab-group-options.yml
    - 3250-parse-scw-config.yml
    - 3252-tss_lookup_plugin-refactor.yml
    - 3256-fix-ptr-handling-in-udm_dns_record.yml
    - 3258-apache2_module.yml
    - 3262-nmcli-add-gre-tunnel-support.yaml
    - 3266-vmid-existing-target-clone.yml
    - 3267-dnsimple1-deprecation.yml
    - 3280-keycloak-module-cleanup-and-consistency.yml
    - 3283-django_manage-fix-command-splitting.yaml
    - 3284-openwrt_init-improvements.yaml
    - 3285-pamd-updated-with-empty-args.yaml
    - 3286-open_iscsi-improvements.yaml
    - 3290-mh-cmd-boolean-not.yaml
    - 3296-clean-etag.yaml
    - 3313-nmcli-add_gsm_support.yml
    - 3315-pids-refactor.yml
    - 3319-gitlab_project_members_enhancement.yml
    - 3327-tss-token-authorization.yml
    - 3328-interfaces_file-improvements.yaml
    - 3329-kernel_blacklist-improvements.yaml
    - 3330-bugfix-keycloak-authentication-flow-requirements-not-set-correctly.yml.yml
    - 3331-do_not_ignore_volatile_configs_by_option.yml
    - 3332-zpool_facts-pythonify.yaml
    - 3334-django_manage-split-params.yaml
    - 3336-openbsd_pkg-fix-KeyError.yml
    - 3337-linode-fix.yml
    - 3343-redfish_utils-addUser-userId.yml
    - 3359-add-unicode_normalize-filter.yml
    - 3367-add-require_two_factor_authentication-property-to-gitlab-group.yml
    - 3379-gitlab_project-ci_cd_properties.yml
    - 3393-pkgng-many_packages_one_command.yml
    - 3400-fix-gitLab-api-searches-always-return-first-found-match-3386.yml
    - 3401-nmcli-needs-type.yml
    - 3404-redfish_utils-skip-manager-network-check.yml
    - 3422-open-iscsi-mutual-authentication-support.yaml
    - 3425-mail_add_configurable_ehlo_hostname.yml
    - 3426-copy-permissions-along-with-file-for-jboss-module.yml
    - 3429-enable_deprecaded_message_for_ignore_volatile_option.yml
    - 3450-callback_opentelemetry-exception_handling.yml
    - 3451-gitlab-group-member-deprecate-name-and-path.yml
    - 3453-fix-gitlab_group-require_two_factor_authentication-cant_be_null.yml
    - 3461-remove-deprecations-for-4.0.0.yml
    - 3473-gitlab_deploy_key-fix_idempotency.yml
    - 3474-zypper_repository_improve_repo_file_idempotency.yml
    - 3478-yaml-callback.yml
    - 3495-ssh_config_add_forwardagent_option.yml
    - 3496-callback_opentelemetry-enrich_stacktraces.yml
    - 3498-callback_opentelemetry-only_in_ci.yml
    - 3500-macports-add-stdout-and-stderr-to-status.yaml
    - 3509-redfish_utils-SetOneTimeBoot-mode-fix.yml
    - 3514-ufw_insert_or_delete_biased_when_deletion_enabled.yml
    - 3526-pkgng-add-integration-tests.yml
    - 3536-quote-role-name-in-url.yml
    - 3538-fix-keycloak-idp-mappers-change-detection.yml
    - 3540-terraform_add_parallelism_parameter.yml
    - 3545-ipa_group-add-append-option.yml
    - 3551-supervisor-all.yml
    - 3554-opkg-name.yml
    - 3556-callback_elastic-enrich_stacktraces.yml
    - 3558-callback_opentelemetry-enrich_service_map.yml
    - 3561-fix-ipa-host-var-detection.yml
    - 3563-nmcli-ipv6_dns.yaml
    - 3564-callback_opentelemetry-redacted_user_pass_from_url_args.yml
    - 3583-fix-pkgin-exception.yml
    - 3599-callback_opentelemetry-enriched_errors_in_loops.yml
    - 3602-fix-gitlab_project_members-improve-search-method.yml
    - 3606-pacman-speed-up-check-if-package-is-installed.yml
    - 3610-fix-keycloak-client-diff-bugs-when-sorting.yml
    - 3611-pipx-fix-inject.yml
    - 3622-fix-gitlab-deploy-key-check-mode.yml
    - 3626-fix-one_image-error.yml
    - 3634-pipx-improve-changed.yaml
    - 3648-mh-cmd-publish-cmd.yaml
    - 3649-proxmox_group_info_TypeError.yml
    - 3655-use-publish_cmd.yaml
    - 4.0.0.yml
    - 502-zfs_bugfix_and_diff_mode_support.yaml
    - 634-gitlab_project_runners.yaml
    - a_module-test.yml
    - ansible-core-_text.yml
    - gem_module_add_bindir_option.yml
    - ipaddress.yml
    - json_query_more_types.yml
    - keycloak-realm-no-log-password-reset.yml
    - keycloak_realm_ssl_required.yml
    - netapp-removal.yml
    - nios-removal.yml
    - pkgin-output-after-error.yml
    - remove-scripts.yml
    modules:
    - description: Install Ansible roles or collections using ansible-galaxy
      name: ansible_galaxy_install
      namespace: packaging.language
    - description: Send Discord messages
      name: discord
      namespace: notification
    - description: Locks package versions in C(dnf) based systems
      name: dnf_versionlock
      namespace: packaging.os
    - description: (un)Marking existing branches for protection
      name: gitlab_protected_branch
      namespace: source_control.gitlab
    - description: Execute SQL on HANA
      name: hana_query
      namespace: database.saphana
    - description: Configure authentication in Keycloak
      name: keycloak_authentication
      namespace: identity.keycloak
    - description: Allows administration of Keycloak client_rolemapping with the Keycloak
        API
      name: keycloak_client_rolemapping
      namespace: identity.keycloak
    - description: Allows administration of Keycloak client_scopes via Keycloak API
      name: keycloak_clientscope
      namespace: identity.keycloak
    - description: Allows administration of Keycloak identity providers via Keycloak
        API
      name: keycloak_identity_provider
      namespace: identity.keycloak
    - description: Allows administration of Keycloak roles via Keycloak API
      name: keycloak_role
      namespace: identity.keycloak
    - description: Allows administration of Keycloak user federations via Keycloak
        API
      name: keycloak_user_federation
      namespace: identity.keycloak
    - description: Execute SQL scripts on a MSSQL database
      name: mssql_script
      namespace: database.mssql
    - description: Manage pacman's list of trusted keys
      name: pacman_key
      namespace: packaging.os
    - description: Manages applications installed with pipx
      name: pipx
      namespace: packaging.language
    - description: Management of a NIC of a Qemu(KVM) VM in a Proxmox VE cluster.
      name: proxmox_nic
      namespace: cloud.misc
    - description: Retrieve information about one or more Proxmox VE tasks
      name: proxmox_tasks_info
      namespace: cloud.misc
    - description: Set key value pairs in Redis
      name: redis_data
      namespace: database.misc
    - description: Increment keys in Redis
      name: redis_data_incr
      namespace: database.misc
    - description: Get value of key in Redis database
      name: redis_data_info
      namespace: database.misc
    - description: Query executions for a Rundeck job
      name: rundeck_job_executions_info
      namespace: web_infrastructure
    - description: Run a Rundeck job
      name: rundeck_job_run
      namespace: web_infrastructure
    - description: Perform SAP Task list execution
      name: sap_task_list_execute
      namespace: system
    - description: Manages SAP SAPCAR archives
      name: sapcar_extract
      namespace: files
    - description: Manages snap aliases
      name: snap_alias
      namespace: packaging.os
    - description: Retrieve XFCE4 configurations
      name: xfconf_info
      namespace: system
    plugins:
      callback:
      - description: Create distributed traces for each Ansible task in Elastic APM
        name: elastic
        namespace: null
      - description: Create distributed traces with OpenTelemetry
        name: opentelemetry
        namespace: null
      filter:
      - description: Transform a sequence of dictionaries to a dictionary where the
          dictionaries are indexed by an attribute
        name: groupby_as_dict
        namespace: null
      - description: Normalizes unicode strings to facilitate comparison of characters
          with normalized forms
        name: unicode_normalize
        namespace: null
      inventory:
      - description: Icinga2 inventory source
        name: icinga2
        namespace: null
      - description: OpenNebula inventory source
        name: opennebula
        namespace: null
      lookup:
      - description: Retrieves the version of an installed collection
        name: collection_version
        namespace: null
      - description: Composes a list with nested elements of other lists or dicts
          which can depend on previous loop variables
        name: dependent
        namespace: null
      - description: Generates random pet names
        name: random_pet
        namespace: null
      - description: Generates random string
        name: random_string
        namespace: null
      - description: Return a number of random words
        name: random_words
        namespace: null
      test:
      - description: Check whether the given string refers to an available module
          or action plugin
        name: a_module
        namespace: null
    release_date: '2021-11-02'
  4.0.1:
    changes:
      bugfixes:
      - a_module test plugin - fix crash when testing a module name that was tombstoned
        (https://github.com/ansible-collections/community.general/pull/3660).
      - xattr - fix exception caused by ``_run_xattr()`` raising a ``ValueError``
        due to a mishandling of base64-encoded value (https://github.com/ansible-collections/community.general/issues/3673).
      release_summary: Bugfix release for today's Ansible 5.0.0 beta 1.
    fragments:
    - 3660-a_module-tombstone.yml
    - 3675-xattr-handle-base64-values.yml
    - 4.0.1.yml
    release_date: '2021-11-09'
